<!doctype html>
<html>
  <head>
    <title>Netflix - Interactive Analysis</title>

    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px;
      }
  
      .chart {
        width: 600px;
        height: 600px;
        background-color: #f7f7f7;
        border: 1px solid #ccc;
        display: none;
      }

      
  
      .active {
        display: block;
      }
  
      .button-container {
        margin-bottom: 10px;
      }
  
      .button {
        padding: 10px 20px;
        font-size: 16px;
        font-weight: bold;
        border: none;
        border-radius: 5px;
        background-color: #4CAF50;
        color: #fff;
        cursor: pointer;
        margin-right: 10px;
      }
    </style>


  </head>
  <body>
    <h1 class="display-4"> Let's explore Netflix!</h1>
    <div class="button-container">
      <button class="button" onclick="showChart(1)">1</button>
      <button class="button" onclick="showChart(2)">2</button>
      <button class="button" onclick="showChart(3)">3</button>
      <button class="button" onclick="showChart(4)">4</button>
    </div>
    <div class="chart" id="chart1"></div>
    <div class="chart" id="chart2"></div>
    <div class="chart" id="chart3"></div>
    <div class="chart" id="chart4"></div>

    <script src="https://d3js.org/d3.v7.min.js"></script>
  <script>
    // Show the specified chart based on the button click
    function showChart(chartNumber) {
      // Hide all charts
      d3.selectAll('.chart').style('display', 'none');

      // Show the selected chart
      const selectedChart = d3.select(`#chart${chartNumber}`);
      selectedChart.style('display', 'block');

      // Generate the chart content based on the selected chart number
      generateChartContent(selectedChart, chartNumber);
    }

    // Generate the content for each chart based on the chart number
    function generateChartContent(chart, chartNumber) {
      // Clear existing content
      chart.html('');


      // Generate content based on the chart number
      switch (chartNumber) {
        case 1:
          chart.append('p').text('Pie Chart');

          // Load the data from the CSV file
          d3.csv('netflix_titles_nov_2019.csv').then(function(data) {
            // Extract the "type" field
            const types = data.map(d => d.type);

            // Count the occurrences of each category
            const counts = {};
            types.forEach(function(type) {
              counts[type] = (counts[type] || 0) + 1;
            });

            // Convert counts object to an array of objects
            const categoryCounts = Object.keys(counts).map(function(type) {
              return { type, count: counts[type] };
            });

            // Create the pie chart
            const width = 400;
            const height = 400;
            const radius = Math.min(width, height) / 2;

            const color = d3.scaleOrdinal()
              .domain(categoryCounts.map(d => d.type))
              .range(d3.schemeCategory10);

            const pie = d3.pie()
              .value(d => d.count)
              .sort(null);

            const arc = d3.arc()
              .innerRadius(0)
              .outerRadius(radius);

            const svg = chart.append('svg')
              .attr('width', width)
              .attr('height', height)
              .append('g')
              .attr('transform', `translate(${width / 2}, ${height / 2})`);

            const arcs = svg.selectAll('arc')
              .data(pie(categoryCounts))
              .enter()
              .append('g');

              arcs.append('path')
                .attr('d', arc)
                .attr('fill', d => color(d.data.type))
                .on('mouseover', function(d) {
                  const percentage = ((d.endAngle - d.startAngle) / (2 * Math.PI)) * 100;
                  tooltip.style('opacity', 1)
                    .html(`${d.data.type}: ${percentage.toFixed(1)}%`)
                    .style('left', (d3.event.pageX + 10) + 'px')
                    .style('top', (d3.event.pageY + 10) + 'px');
                })
                .on('mouseout', function(d) {
                  tooltip.style('opacity', 0);
                });

            arcs.append('text')
              .attr('transform', d => `translate(${arc.centroid(d)})`)
              .attr('text-anchor', 'middle')
              .text(d => `${d.data.type}: ${d.data.count}`);
          });
          break;

        case 2:
          chart.append('p').text('Content Over the Years');
          break;
        case 3:
          chart.append('p').text('Content from different countries');
          break;
        case 4:
          chart.append('p').text('Top Categories');
          break;
        default:
          chart.append('p').text('No chart content available');
      }
    }
  </script>
  </body>
</html>
