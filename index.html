<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Bubble Chart Example</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    /* CSS styles for the chart */
    .node {
      stroke: #fff;
      opacity: 0.8;
      transition: fill 0.3s ease;
    }

    .node:hover {
      fill: #ff7f0e;
      cursor: pointer;
    }

    .label {
      pointer-events: none;
    }
  </style>
</head>
<body>
  <div id="chart1" class="chart"></div>

  <script>
    // Define the data for the bubble chart
    const data = [
      { category: "International TV Shows", count: 1 },
      { category: "Korean TV Shows", count: 1 },
      { category: "Romantic TV Shows", count: 1 },
      { category: "Documentaries", count: 1 },
      { category: "International Movies", count: 2 },
      { category: "Comedies", count: 3 },
      { category: "Dramas", count: 7 },
      { category: "Independent Movies", count: 3 },
      { category: "Kids' TV", count: 1 },
      { category: "Thrillers", count: 2 },
      { category: "Crime TV Shows", count: 2 },
      { category: "Spanish-Language TV Shows", count: 1 },
      { category: "Reality TV", count: 1 },
      { category: "Action & Adventure", count: 2 },
      { category: "TV Comedies", count: 4 },
      { category: "Stand-Up Comedy & Talk Shows", count: 1 },
      { category: "TV Dramas", count: 3 },
      { category: "Anime Series", count: 1 },
      { category: "Docuseries", count: 2 },
      { category: "Children & Family Movies", count: 2 },
      { category: "Romantic Movies", count: 1 }
    ];

    // Set up the bubble chart
    const width = 600;
    const height = 400;
    const svg = d3.select("#chart1")
      .append("svg")
      .attr("width", width)
      .attr("height", height);

    const color = d3.scaleOrdinal(d3.schemeCategory10);

    const pack = data => d3.pack()
      .size([width, height])
      .padding(3)
      (d3.hierarchy({ children: data })
        .sum(d => d.count));

    const root = pack(data);

    const node = svg.selectAll("circle")
      .data(root.leaves())
      .join("circle")
      .attr("class", "node")
      .attr("cx", d => d.x)
      .attr("cy", d => d.y)
      .attr("r", d => d.r)
      .attr("fill", d => color(d.data.category))
      .on("mouseover", function (event, d) {
        d3.select(this).attr("fill", "#ff7f0e");
        tooltip.style("opacity", 1)
          .html(`${d.data.category}: ${d.data.count}`)
          .style("left", (d3.event.pageX + 10) + "px")
          .style("top", (d3.event.pageY + 10) + "px");
      })
      .on("mouseout", function (event, d) {
        d3.select(this).attr("fill", d => color(d.data.category));
        tooltip.style("opacity", 0);
      });

    // Add labels to the bubbles
    const labels = svg.selectAll("text")
      .data(root.leaves())
      .join("text")
      .attr("class", "label")
      .attr("x", d => d.x)
      .attr("y", d => d.y)
      .attr("text-anchor", "middle")
      .attr("dominant-baseline", "middle")
      .attr("fill", "#000")
      .style("font-size", "12px")
      .text(d => d.data.category);

    // Add tooltip element
    const tooltip = d3.select("body")
      .append("div")
      .attr("class", "tooltip")
      .style("opacity", 0);

  </script>
</body>
</html>
